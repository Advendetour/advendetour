<head>
  <!-- <%= javascript_include_tag('first.html.erb') %> -->
  <%= javascript_include_tag('index.js') %>
  <%= javascript_include_tag('jquery-1.12.4.min.js') %>
  <script async defer
     src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB5LyIEhdrka55mYbw5pIHSwDyA-FR82gw&callback=initMap"></script>
</head>
<body>
<%= @city %>
<%= "yo" %>
</body>
<script>
var startCountry;
var startCity;
var endCountry;
var endCity;
var start;
var end;
var origin;
var dest;
var directionsService = new google.maps.DirectionsService;
var directionsDisplay = new google.maps.DirectionsRenderer;
function start_search()
{

  startCountry = $("#dep_country").val();
  //alert(startCountry);
  startCity = $("#dep_city").val();
  start = coord(startCity,startCountry);

  endCountry = $("#dest_city").val();
  endCity = $("#dest_city").val();
  end = coord(endCity,endCountry);
  origin= new google.maps.LatLng(start[0],start[1]);
  dest = new google.maps.LatLng(end[0],end[1]);
  calculateAndDisplayRoute(directionsService,directionsDisplay);
}

function calculateAndDisplayRoute(directionsService,directionsDisplay) {
  var city_arr = $(".city[data-set='true']");
  var wypts;
  var i;
  for(i=1;i<city_arr.length-1;i++){
    var city = city_arr[i].getAttribute("data-name");
    var coords = coord(city);
    var loc = new google.maps.LatLng(coords[0],coords[1]);
    wypts= {location: loc, stopover: true};
    bypass[i-1]=wypts;
  }
</script>
